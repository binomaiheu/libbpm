<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>libbpm: bpmprocess/bpm_process.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.6 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="classes.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
<h1>bpmprocess/bpm_process.h</h1><a href="bpm__process_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/*</span>
<a name="l00002"></a>00002 <span class="comment">  libbpm - BPM signal processing/simulation library</span>
<a name="l00003"></a>00003 <span class="comment">  Copyright (C) 2006-08 Bino Maiheu (bino@hep.ucl.ac.uk)</span>
<a name="l00004"></a>00004 <span class="comment">  </span>
<a name="l00005"></a>00005 <span class="comment">  This program is free software; you can redistribute it and/or modify</span>
<a name="l00006"></a>00006 <span class="comment">  it under the terms of the GNU General Public License as published by</span>
<a name="l00007"></a>00007 <span class="comment">  the Free Software Foundation; either version 2 of the License, or</span>
<a name="l00008"></a>00008 <span class="comment">  (at your option) any later version.</span>
<a name="l00009"></a>00009 <span class="comment">  </span>
<a name="l00010"></a>00010 <span class="comment">  This program is distributed in the hope that it will be useful,</span>
<a name="l00011"></a>00011 <span class="comment">  but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<a name="l00012"></a>00012 <span class="comment">  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<a name="l00013"></a>00013 <span class="comment">  GNU General Public License for more details.</span>
<a name="l00014"></a>00014 <span class="comment">  </span>
<a name="l00015"></a>00015 <span class="comment">  You should have received a copy of the GNU General Public License</span>
<a name="l00016"></a>00016 <span class="comment">  along with this program; if not, write to the Free Software</span>
<a name="l00017"></a>00017 <span class="comment">  Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301 USA </span>
<a name="l00018"></a>00018 <span class="comment">*/</span>
<a name="l00019"></a>00019 
<a name="l00315"></a>00315 <span class="preprocessor">#ifndef BPMPROCESS_H__</span>
<a name="l00316"></a>00316 <span class="preprocessor"></span><span class="preprocessor">#define BPMPROCESS_H__</span>
<a name="l00317"></a>00317 <span class="preprocessor"></span>
<a name="l00318"></a>00318 <span class="comment">/* -----------------------------------------------------------------------------</span>
<a name="l00319"></a>00319 <span class="comment">// includes</span>
<a name="l00320"></a>00320 <span class="comment">// -------------------------------------------------------------------------- */</span>
<a name="l00321"></a>00321 <span class="preprocessor">#include &lt;float.h&gt;</span>
<a name="l00322"></a>00322 <span class="preprocessor">#include &lt;math.h&gt;</span>
<a name="l00323"></a>00323 <span class="preprocessor">#include &lt;bpm/bpm_defs.h&gt;</span>
<a name="l00324"></a>00324 <span class="preprocessor">#include &lt;bpm/bpm_interface.h&gt;</span>
<a name="l00325"></a>00325 <span class="preprocessor">#include &lt;bpm/bpm_wf.h&gt;</span>
<a name="l00326"></a>00326 <span class="preprocessor">#include &lt;bpm/bpm_dsp.h&gt;</span>
<a name="l00327"></a>00327 
<a name="l00328"></a>00328 <span class="comment">/* -----------------------------------------------------------------------------</span>
<a name="l00329"></a>00329 <span class="comment">// macro definitions</span>
<a name="l00330"></a>00330 <span class="comment">// -------------------------------------------------------------------------- */</span>
<a name="l00331"></a><a class="code" href="group__processing.html#g42cc22e8c958743e2bd86fe5bdfdd42d">00331</a> <span class="preprocessor">#define  PROC_DEFAULT         0           </span>
<a name="l00332"></a>00332 <span class="preprocessor">#define  PROC_DO_FFT          0x00000001  </span>
<a name="l00333"></a>00333 <span class="preprocessor">#define  PROC_DO_FIT          0x00000002  </span>
<a name="l00334"></a>00334 <span class="preprocessor">#define  PROC_DO_DDC          0x00000004  </span>
<a name="l00335"></a>00335 <span class="preprocessor">#define  PROC_DDC_CALIBFREQ   0x00000008  </span>
<a name="l00336"></a>00336 <span class="preprocessor">#define  PROC_DDC_CALIBTDECAY 0x00000010  </span>
<a name="l00337"></a>00337 <span class="preprocessor">#define  PROC_DDC_FITFREQ     0x00000020  </span>
<a name="l00338"></a>00338 <span class="preprocessor">#define  PROC_DDC_FITTDECAY   0x00000040  </span>
<a name="l00339"></a>00339 <span class="preprocessor">#define  PROC_DDC_FFTFREQ     0x00000080  </span>
<a name="l00340"></a>00340 <span class="preprocessor">#define  PROC_DDC_FFTTDECAY   0x00000100  </span>
<a name="l00341"></a>00341 <span class="preprocessor">#define  PROC_DDC_FULL        0x00000200  </span>
<a name="l00342"></a>00342 <span class="preprocessor">#define  PROC_FIT_DDC         0x00000400  </span>
<a name="l00343"></a>00343 <span class="preprocessor">#define  PROC_FIT_FFT         0x00000800  </span>
<a name="l00344"></a>00344 <span class="preprocessor">#define  PROC_RAW_PHASE       0x00001000  </span>
<a name="l00345"></a>00345 <span class="preprocessor">#define  PROC_CORR_AMP        0x00002000  </span>
<a name="l00346"></a>00346 <span class="preprocessor">#define  PROC_CORR_PHASE      0x00004000  </span>
<a name="l00347"></a>00347 <span class="preprocessor">#define  PROC_CORR_GAIN       0x00006000  </span>
<a name="l00348"></a>00348 <span class="preprocessor"></span>
<a name="l00349"></a>00349 <span class="preprocessor"></span><span class="comment">/* -----------------------------------------------------------------------------</span>
<a name="l00350"></a>00350 <span class="comment">// typedefs, enums and other declarations</span>
<a name="l00351"></a>00351 <span class="comment">// -------------------------------------------------------------------------- */</span>
<a name="l00352"></a>00352 <span class="preprocessor">#ifdef __cplusplus</span>
<a name="l00353"></a>00353 <span class="preprocessor"></span><span class="keyword">extern</span> <span class="stringliteral">"C"</span> {
<a name="l00354"></a>00354 <span class="preprocessor">#endif</span>
<a name="l00355"></a>00355 <span class="preprocessor"></span>
<a name="l00356"></a>00356 
<a name="l00357"></a>00357 <span class="comment">/* -----------------------------------------------------------------------------</span>
<a name="l00358"></a>00358 <span class="comment">// function prototypes and declarations</span>
<a name="l00359"></a>00359 <span class="comment">// -------------------------------------------------------------------------- */</span>
<a name="l00360"></a>00360   <span class="comment">/* -- General processing routines to process monopole, dipole and diode pulses -- */</span>
<a name="l00361"></a>00361 
<a name="l00377"></a>00377   EXTERN <span class="keywordtype">int</span> <a class="code" href="group__processing.html#g64dcc54dd58051ed9183a44b791ed73b">process_diode</a>( <a class="code" href="structdoublewf__t.html">doublewf_t</a> *signal, <a class="code" href="structbpmconf.html">bpmconf_t</a> *conf, <a class="code" href="structbpmproc.html">bpmproc_t</a> *proc );
<a name="l00378"></a>00378 
<a name="l00379"></a>00379 
<a name="l00394"></a>00394   EXTERN <span class="keywordtype">int</span> <a class="code" href="group__processing.html#g4d159862631514e412a0f30e278e9426">process_monopole</a>( <a class="code" href="structdoublewf__t.html">doublewf_t</a> *signal, <a class="code" href="structbpmconf.html">bpmconf_t</a> *bpm, <a class="code" href="structbpmcalib.html">bpmcalib_t</a> *cal, <a class="code" href="structbpmproc.html">bpmproc_t</a> *proc,
<a name="l00395"></a>00395                                <a class="code" href="structbpmproc.html">bpmproc_t</a> *trig, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> mode );
<a name="l00396"></a>00396 
<a name="l00397"></a>00397   
<a name="l00414"></a>00414   EXTERN <span class="keywordtype">int</span> <a class="code" href="group__processing.html#g7263f2231c573bf98d41dbaab82c01be">process_dipole</a>( <a class="code" href="structdoublewf__t.html">doublewf_t</a> *signal, <a class="code" href="structbpmconf.html">bpmconf_t</a> *bpm, <a class="code" href="structbpmcalib.html">bpmcalib_t</a> *cal, <a class="code" href="structbpmproc.html">bpmproc_t</a> *proc, 
<a name="l00415"></a>00415                              <a class="code" href="structbpmproc.html">bpmproc_t</a> *trig, <a class="code" href="structbpmproc.html">bpmproc_t</a> *ampref, <a class="code" href="structbpmproc.html">bpmproc_t</a> *phaseref, 
<a name="l00416"></a>00416                              <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> mode );
<a name="l00417"></a>00417 
<a name="l00461"></a>00461   EXTERN <span class="keywordtype">int</span> <a class="code" href="group__processing.html#gbd8d3c45cc42c393a13e1471b1dac2c2">process_waveform</a>( <a class="code" href="structdoublewf__t.html">doublewf_t</a> *signal, <a class="code" href="structbpmconf.html">bpmconf_t</a> *bpm, <a class="code" href="structbpmproc.html">bpmproc_t</a> *proc, 
<a name="l00462"></a>00462                                <a class="code" href="structbpmproc.html">bpmproc_t</a> *trig, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> mode );
<a name="l00463"></a>00463   
<a name="l00464"></a>00464 
<a name="l00465"></a>00465 
<a name="l00466"></a>00466 
<a name="l00491"></a>00491   EXTERN <span class="keywordtype">int</span> <a class="code" href="group__processing.html#g12b153af4b09cd59e863cef0bf5114c3">postprocess_waveform</a>(  <a class="code" href="structbpmconf.html">bpmconf_t</a> *bpm, <a class="code" href="structbpmproc.html">bpmproc_t</a> *proc, <a class="code" href="structbpmcalib.html">bpmcalib_t</a> *cal, 
<a name="l00492"></a>00492                                     <a class="code" href="structbpmproc.html">bpmproc_t</a> *ampref, <a class="code" href="structbpmproc.html">bpmproc_t</a> *phaseref, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> mode );
<a name="l00493"></a>00493 
<a name="l00494"></a>00494 
<a name="l00495"></a>00495   
<a name="l00496"></a>00496   <span class="comment">/* ===========================  caltone handling ===================================== */</span>
<a name="l00497"></a>00497 
<a name="l00498"></a>00498 
<a name="l00516"></a>00516   EXTERN <span class="keywordtype">int</span> <a class="code" href="group__processing.html#g25fcb848f5ef6ad50b2d0ab683b9ff00">process_caltone</a>( <a class="code" href="structdoublewf__t.html">doublewf_t</a> *signal, <a class="code" href="structbpmconf.html">bpmconf_t</a> *bpm, <a class="code" href="structbpmproc.html">bpmproc_t</a> *proc, 
<a name="l00517"></a>00517                               <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> mode );
<a name="l00518"></a>00518 
<a name="l00519"></a>00519 
<a name="l00537"></a>00537   EXTERN <span class="keywordtype">int</span> <a class="code" href="group__processing.html#gfbefcc42457d943c215b3a423540a145">correct_gain</a>( <a class="code" href="structbpmproc.html">bpmproc_t</a> *proc, <a class="code" href="structbpmcalib.html">bpmcalib_t</a> *cal, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> mode );
<a name="l00538"></a>00538 
<a name="l00539"></a>00539 
<a name="l00540"></a>00540 
<a name="l00541"></a>00541   <span class="comment">/* ============================= Signal fitting routines ================================= */</span>
<a name="l00563"></a>00563   EXTERN <span class="keywordtype">int</span> <a class="code" href="group__processing.html#gef5c2fd31031b3a529366aef80699d23">fit_waveform</a>( <a class="code" href="structdoublewf__t.html">doublewf_t</a> *w, <span class="keywordtype">double</span> t0,
<a name="l00564"></a>00564                            <span class="keywordtype">double</span> i_freq, <span class="keywordtype">double</span> i_tdecay, <span class="keywordtype">double</span> i_amp, <span class="keywordtype">double</span> i_phase,
<a name="l00565"></a>00565                            <span class="keywordtype">double</span> *freq, <span class="keywordtype">double</span> *tdecay, <span class="keywordtype">double</span> *amp, <span class="keywordtype">double</span> *phase );
<a name="l00566"></a>00566 
<a name="l00567"></a>00567   
<a name="l00572"></a>00572   EXTERN <span class="keywordtype">int</span> <a class="code" href="group__processing.html#g8435d116a246f99a782b4fd516990248">fit_diodepulse</a>( <a class="code" href="structdoublewf__t.html">doublewf_t</a> *w, <span class="keywordtype">double</span> *t0 );
<a name="l00573"></a>00573 
<a name="l00574"></a>00574 
<a name="l00575"></a>00575   <span class="comment">/* ============================== FFT routines ====================================== */</span>
<a name="l00586"></a>00586   EXTERN <span class="keywordtype">int</span> <a class="code" href="group__processing.html#g702adf29e485a816b5b8b2dbefb6fe6a">fft_waveform</a>( <a class="code" href="structdoublewf__t.html">doublewf_t</a> *w, <a class="code" href="structcomplexwf__t.html">complexwf_t</a> *ft );
<a name="l00587"></a>00587 
<a name="l00588"></a>00588   
<a name="l00606"></a>00606   EXTERN <span class="keywordtype">int</span> <a class="code" href="group__processing.html#g91374c399c6b149ac8ca96ee1245dc7a">fit_fft_prepare</a>( <a class="code" href="structcomplexwf__t.html">complexwf_t</a> *ft, <span class="keywordtype">int</span> *n1, <span class="keywordtype">int</span> *n2,
<a name="l00607"></a>00607                               <span class="keywordtype">double</span> *amp, <span class="keywordtype">double</span> *freq, <span class="keywordtype">double</span> *fwhm );
<a name="l00608"></a>00608 
<a name="l00609"></a>00609   
<a name="l00632"></a>00632   EXTERN <span class="keywordtype">int</span> <a class="code" href="group__processing.html#gabfbe75e2891a3756443d476b05c9b61">fit_fft</a>( <a class="code" href="structcomplexwf__t.html">complexwf_t</a> *ft, <span class="keywordtype">double</span> *freq, <span class="keywordtype">double</span> *tdecay, <span class="keywordtype">double</span> *A, <span class="keywordtype">double</span> *C );
<a name="l00633"></a>00633 
<a name="l00634"></a>00634 
<a name="l00635"></a>00635 
<a name="l00636"></a>00636   <span class="comment">/* ============================== DDC routines ====================================== */</span>
<a name="l00637"></a>00637 
<a name="l00659"></a>00659   EXTERN <span class="keywordtype">int</span> <a class="code" href="group__processing.html#gb0f5fd9a629e07038d336c0aad2cf41c">check_saturation</a>( <a class="code" href="structdoublewf__t.html">doublewf_t</a> *w, <span class="keywordtype">int</span> nbits, <span class="keywordtype">int</span> *iunsat );
<a name="l00660"></a>00660 
<a name="l00661"></a>00661 
<a name="l00674"></a>00674   EXTERN <span class="keywordtype">int</span> <a class="code" href="group__processing.html#g9153adcd6718410b99010b3ad3209edb">downmix_waveform</a>( <a class="code" href="structdoublewf__t.html">doublewf_t</a> *w, <span class="keywordtype">double</span> frequency, <a class="code" href="structcomplexwf__t.html">complexwf_t</a> *out );
<a name="l00675"></a>00675 
<a name="l00676"></a>00676 
<a name="l00681"></a>00681   EXTERN <span class="keywordtype">int</span> <a class="code" href="group__processing.html#g4d5ba258550486446e98b18b06d793f9">ddc_waveform</a>( <a class="code" href="structdoublewf__t.html">doublewf_t</a> *w, <span class="keywordtype">double</span> frequency, <a class="code" href="structfilter__t.html">filter_t</a> *filt, <a class="code" href="structcomplexwf__t.html">complexwf_t</a> *dc,
<a name="l00682"></a>00682                            <a class="code" href="structdoublewf__t.html">doublewf_t</a> *buf_re, <a class="code" href="structdoublewf__t.html">doublewf_t</a> *buf_im );
<a name="l00683"></a>00683 
<a name="l00684"></a>00684   
<a name="l00693"></a>00693   EXTERN <span class="keywordtype">int</span> <a class="code" href="group__processing.html#gddd40cf316f88ea006e2e68424cb6987">ddc_sample_waveform</a>( <a class="code" href="structdoublewf__t.html">doublewf_t</a> *w, <span class="keywordtype">double</span> frequency, <a class="code" href="structfilter__t.html">filter_t</a> *filt, <span class="keywordtype">int</span> iSample,
<a name="l00694"></a>00694                                   <span class="keywordtype">double</span> t0, <span class="keywordtype">double</span> tdecay, <span class="keywordtype">double</span> *amp, <span class="keywordtype">double</span> *phase,
<a name="l00695"></a>00695                                   <a class="code" href="structdoublewf__t.html">doublewf_t</a> *buf_re, <a class="code" href="structdoublewf__t.html">doublewf_t</a> *buf_im );
<a name="l00696"></a>00696 
<a name="l00711"></a>00711   EXTERN <span class="keywordtype">int</span> <a class="code" href="group__processing.html#gbbcbc20893990f64b46cfde9c823c4aa">get_pedestal</a>( <a class="code" href="structdoublewf__t.html">doublewf_t</a> *wf, <span class="keywordtype">int</span> range, <span class="keywordtype">double</span> *offset, <span class="keywordtype">double</span> *rms );
<a name="l00712"></a>00712 
<a name="l00713"></a>00713  
<a name="l00727"></a>00727   EXTERN <span class="keywordtype">int</span> <a class="code" href="group__processing.html#gac8e6d526cd906365ad1fa23f07b865d">get_t0</a>( <a class="code" href="structdoublewf__t.html">doublewf_t</a> *w, <span class="keywordtype">double</span> *t0 );
<a name="l00728"></a>00728   
<a name="l00729"></a>00729 
<a name="l00730"></a>00730   
<a name="l00731"></a>00731   <span class="comment">/* ======================= Some position, IQ routines... ============================ */</span>
<a name="l00732"></a>00732 
<a name="l00749"></a>00749   EXTERN <span class="keywordtype">int</span> <a class="code" href="group__processing.html#gd7417582fb39b8f0cd38a4e28618bf2b">get_IQ</a>( <span class="keywordtype">double</span> amp, <span class="keywordtype">double</span> phase, <span class="keywordtype">double</span> refamp, <span class="keywordtype">double</span> refphase,
<a name="l00750"></a>00750                      <span class="keywordtype">double</span> *Q, <span class="keywordtype">double</span> *I );
<a name="l00751"></a>00751 
<a name="l00752"></a>00752 
<a name="l00768"></a>00768   EXTERN <span class="keywordtype">int</span> <a class="code" href="group__processing.html#g6906c83d2017b8c2536b31881155e8a6">get_pos</a>( <span class="keywordtype">double</span> Q, <span class="keywordtype">double</span> I, <span class="keywordtype">double</span> IQphase, <span class="keywordtype">double</span> posscale,
<a name="l00769"></a>00769                       <span class="keywordtype">double</span> *pos );
<a name="l00770"></a>00770 
<a name="l00771"></a>00771 
<a name="l00772"></a>00772   
<a name="l00788"></a>00788   EXTERN <span class="keywordtype">int</span> <a class="code" href="group__processing.html#g4010b123b9d6424c97ea9ea77b7a8e4d">get_slope</a>( <span class="keywordtype">double</span> Q, <span class="keywordtype">double</span> I, <span class="keywordtype">double</span> IQphase, <span class="keywordtype">double</span> slopescale,
<a name="l00789"></a>00789                         <span class="keywordtype">double</span> *slope );
<a name="l00790"></a>00790 
<a name="l00791"></a>00791 <span class="preprocessor">#ifdef __cplusplus</span>
<a name="l00792"></a>00792 <span class="preprocessor"></span>}
<a name="l00793"></a>00793 <span class="preprocessor">#endif</span>
<a name="l00794"></a>00794 <span class="preprocessor"></span>
<a name="l00795"></a>00795 <span class="preprocessor">#endif </span><span class="comment">/* #ifndef BPMINTERFACE_H__ */</span>
<a name="l00796"></a>00796 
<a name="l00797"></a>00797 <span class="comment">/* ================================ end of file ============================= */</span>
</pre></div></div>
<hr size="1"><address style="text-align: right;"><small>Generated on Wed Jun 25 17:31:48 2008 for libbpm by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.6 </small></address>
</body>
</html>
