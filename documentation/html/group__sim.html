<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>libbpm: BPM signal simulation routines</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.6 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="classes.html"><span>Data&nbsp;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>BPM signal simulation routines</h1><hr><a name="_details"></a><h2>Detailed Description</h2>

<p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Files</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">file &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="add__mode__response_8c.html">add_mode_response.c</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">file &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="bpm__simulation_8h.html">bpm_simulation.h</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">libbpm waveform simulation routines <br></td></tr>

<p>
<tr><td class="memItemLeft" nowrap align="right" valign="top">file &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="digitise_8c.html">digitise.c</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">file &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="generate__bpmsignal_8c.html">generate_bpmsignal.c</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">file &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="generate__diodesignal_8c.html">generate_diodesignal.c</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">file &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="get__mode__amplitude_8c.html">get_mode_amplitude.c</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">file &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="get__mode__response_8c.html">get_mode_response.c</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">file &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="set__temp_8c.html">set_temp.c</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">file &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="set__time_8c.html">set_time.c</a></td></tr>

<tr><td colspan="2"><br><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__sim.html#g84d47ce6d9b52f93054781f5489df910">K_SAMPLE</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="g057113600a8f0d237093da56f7c6b490"></a><!-- doxytag: member="sim::MODE_DECAY" ref="g057113600a8f0d237093da56f7c6b490" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>MODE_DECAY</b></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="g26762c236ebdbdf60197a9aa519bf6aa"></a><!-- doxytag: member="sim::MODE_MAX_SAMPLES" ref="g26762c236ebdbdf60197a9aa519bf6aa" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>MODE_MAX_SAMPLES</b></td></tr>

<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">EXTERN int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__sim.html#gb05c63b73b30ae1c78b9a26560043312">set_temp</a> (double TK)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">EXTERN int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__sim.html#gebc5bf81d987b26f74c55306ffcfa5a2">set_time</a> (double ts)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">EXTERN int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__sim.html#g0bd5d872d8ef9269dfb3258be342c223">generate_bpmsignal</a> (<a class="el" href="structbpmconf.html">bpmconf_t</a> *bpm, <a class="el" href="structbpmmode.html">bpmmode_t</a> *mode, <a class="el" href="structbeamconf.html">beamconf_t</a> *beam, <a class="el" href="structdoublewf__t.html">doublewf_t</a> *rf)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">EXTERN int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__sim.html#gef884192643139e71fa61cae9d8b4392">add_mode_response</a> (<a class="el" href="structbpmconf.html">bpmconf_t</a> *bpm, <a class="el" href="structbpmmode.html">bpmmode_t</a> *mode, <a class="el" href="structbunchconf.html">bunchconf_t</a> *bunch, <a class="el" href="structdoublewf__t.html">doublewf_t</a> *rf)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">EXTERN <a class="el" href="structcomplex__t.html">complex_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__sim.html#g48d7fa109bfc01b1c1685b8c4122ccbb">get_mode_amplitude</a> (<a class="el" href="structbpmconf.html">bpmconf_t</a> *bpm, <a class="el" href="structbpmmode.html">bpmmode_t</a> *mode, <a class="el" href="structbunchconf.html">bunchconf_t</a> *bunch)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">EXTERN <a class="el" href="structdoublewf__t.html">doublewf_t</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__sim.html#gefb34ed8710cb83e0ef30ddb6b4c8e33">generate_diodesignal</a> (<a class="el" href="structdoublewf__t.html">doublewf_t</a> *rf, double sens, <a class="el" href="structfilter__t.html">filter_t</a> *filt, triggertype_t diode)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">EXTERN int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__sim.html#gf0f427c71051ef0d09f0760b2e2541bc">get_mode_response</a> (<a class="el" href="structbpmmode.html">bpmmode_t</a> *mode)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">EXTERN int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__sim.html#g2f6432343a7f528625487b6c00be2298">digitise</a> (<a class="el" href="structdoublewf__t.html">doublewf_t</a> *IF, int nbits, double range_min, double range_max, double clock_jitter, double digi_noise, unsigned int ipmode, <a class="el" href="structintwf__t.html">intwf_t</a> *wf)</td></tr>

<tr><td colspan="2"><br><h2>Variables</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">EXTERN double&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__sim.html#gab98b463116d15c85586716a295bd4e5">ambient_temp</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">EXTERN double&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__sim.html#g0974a019ef95024af711df3d31deb629">system_time</a></td></tr>

</table>
<hr><h2>Define Documentation</h2>
<a class="anchor" name="g84d47ce6d9b52f93054781f5489df910"></a><!-- doxytag: member="bpm_simulation.h::K_SAMPLE" ref="g84d47ce6d9b52f93054781f5489df910" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define K_SAMPLE          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="bpm__simulation_8h-source.html#l00048">48</a> of file <a class="el" href="bpm__simulation_8h-source.html">bpm_simulation.h</a>.</p>

</div>
</div><p>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="gb05c63b73b30ae1c78b9a26560043312"></a><!-- doxytag: member="bpm_simulation.h::set_temp" ref="gb05c63b73b30ae1c78b9a26560043312" args="(double TK)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">EXTERN int set_temp           </td>
          <td>(</td>
          <td class="paramtype">double&nbsp;</td>
          <td class="paramname"> <em>TK</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Set ambient temperature<p>
Sets up the ambient temperature <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>TK</em>&nbsp;</td><td>ambient temperature in Kelvin</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>BPM_SUCCESS </dd></dl>

<p>Definition at line <a class="el" href="set__temp_8c-source.html#l00017">17</a> of file <a class="el" href="set__temp_8c-source.html">set_temp.c</a>.</p>

<p>References <a class="el" href="bpm__simulation_8h-source.html#l00067">ambient_temp</a>.</p>

</div>
</div><p>
<a class="anchor" name="gebc5bf81d987b26f74c55306ffcfa5a2"></a><!-- doxytag: member="bpm_simulation.h::set_time" ref="gebc5bf81d987b26f74c55306ffcfa5a2" args="(double ts)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">EXTERN int set_time           </td>
          <td>(</td>
          <td class="paramtype">double&nbsp;</td>
          <td class="paramname"> <em>ts</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Set system time<p>
Sets up the system clock <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>ts</em>&nbsp;</td><td>current time in seconds</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>BPM_SUCCESS </dd></dl>

<p>Definition at line <a class="el" href="set__time_8c-source.html#l00017">17</a> of file <a class="el" href="set__time_8c-source.html">set_time.c</a>.</p>

<p>References <a class="el" href="bpm__simulation_8h-source.html#l00077">system_time</a>.</p>

</div>
</div><p>
<a class="anchor" name="g0bd5d872d8ef9269dfb3258be342c223"></a><!-- doxytag: member="bpm_simulation.h::generate_bpmsignal" ref="g0bd5d872d8ef9269dfb3258be342c223" args="(bpmconf_t *bpm, bpmmode_t *mode, beamconf_t *beam, doublewf_t *rf)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">EXTERN int generate_bpmsignal           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structbpmconf.html">bpmconf_t</a> *&nbsp;</td>
          <td class="paramname"> <em>bpm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structbpmmode.html">bpmmode_t</a> *&nbsp;</td>
          <td class="paramname"> <em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structbeamconf.html">beamconf_t</a> *&nbsp;</td>
          <td class="paramname"> <em>beam</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structdoublewf__t.html">doublewf_t</a> *&nbsp;</td>
          <td class="paramname"> <em>rf</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Calculates the multi-mode response of a cavity BPM defined using bpminterface structures for a beam containing both one or multiple bunches. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>bpm</em>&nbsp;</td><td>a pointer to the structure defining the bpm </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>beam</em>&nbsp;</td><td>a pointer to the structure defining the beam </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>rf</em>&nbsp;</td><td>a pointer to were to store the generated waveform </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>BPM_SUCCES upon succes, BPM_FAILURE upon failure </dd></dl>

<p>Definition at line <a class="el" href="generate__bpmsignal_8c-source.html#l00009">9</a> of file <a class="el" href="generate__bpmsignal_8c-source.html">generate_bpmsignal.c</a>.</p>

<p>References <a class="el" href="add__mode__response_8c-source.html#l00010">add_mode_response()</a>, <a class="el" href="bpm__interface_8h-source.html#l00268">bunchconf::arrival_time</a>, <a class="el" href="bpm__error_8c-source.html#l00009">bpm_error()</a>, <a class="el" href="bpm__interface_8h-source.html#l00290">bpmmode::buffer</a>, <a class="el" href="bpm__interface_8h-source.html#l00234">beamconf::bunch</a>, <a class="el" href="doublewf_8c-source.html#l00008">doublewf()</a>, <a class="el" href="doublewf_8c-source.html#l00575">doublewf_getvalue()</a>, <a class="el" href="doublewf_8c-source.html#l00185">doublewf_reset()</a>, <a class="el" href="bpm__wf_8h-source.html#l00176">doublewf_t::fs</a>, <a class="el" href="bpm__wf_8h-source.html#l00190">complexwf_t::fs</a>, <a class="el" href="bpm__interface_8h-source.html#l00283">bpmmode::name</a>, <a class="el" href="bpm__interface_8h-source.html#l00232">beamconf::nbunches</a>, <a class="el" href="bpm__wf_8h-source.html#l00175">doublewf_t::ns</a>, <a class="el" href="bpm__wf_8h-source.html#l00189">complexwf_t::ns</a>, <a class="el" href="bpm__interface_8h-source.html#l00289">bpmmode::response</a>, <a class="el" href="bpm__wf_8h-source.html#l00177">doublewf_t::wf</a>, and <a class="el" href="bpm__wf_8h-source.html#l00162">WF_QUADRATIC</a>.</p>

</div>
</div><p>
<a class="anchor" name="gef884192643139e71fa61cae9d8b4392"></a><!-- doxytag: member="bpm_simulation.h::add_mode_response" ref="gef884192643139e71fa61cae9d8b4392" args="(bpmconf_t *bpm, bpmmode_t *mode, bunchconf_t *bunch, doublewf_t *rf)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">EXTERN int add_mode_response           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structbpmconf.html">bpmconf_t</a> *&nbsp;</td>
          <td class="paramname"> <em>bpm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structbpmmode.html">bpmmode_t</a> *&nbsp;</td>
          <td class="paramname"> <em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structbunchconf.html">bunchconf_t</a> *&nbsp;</td>
          <td class="paramname"> <em>bunch</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structdoublewf__t.html">doublewf_t</a> *&nbsp;</td>
          <td class="paramname"> <em>rf</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Adds the response of a single mode generated by one bunch to the waveform rf, starting at the first sample <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>bpm</em>&nbsp;</td><td>a pointer to the structure defining the bpm </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>mode</em>&nbsp;</td><td>a pointer to the structure defining a cavity mode </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>bunch</em>&nbsp;</td><td>a pointer to the structure defining the current bunch </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>rf</em>&nbsp;</td><td>a pointer the waveform the response will be added to </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>BPM_SUCCES upon succes, BPM_FAILURE upon failure </dd></dl>

<p>Definition at line <a class="el" href="add__mode__response_8c-source.html#l00010">10</a> of file <a class="el" href="add__mode__response_8c-source.html">add_mode_response.c</a>.</p>

<p>References <a class="el" href="bpm__error_8c-source.html#l00009">bpm_error()</a>, <a class="el" href="get__mode__amplitude_8c-source.html#l00009">get_mode_amplitude()</a>, <a class="el" href="bpm__nr_8h-source.html#l00208">complex_t::im</a>, <a class="el" href="bpm__wf_8h-source.html#l00189">complexwf_t::ns</a>, <a class="el" href="bpm__wf_8h-source.html#l00175">doublewf_t::ns</a>, <a class="el" href="bpm__interface_8h-source.html#l00286">bpmmode::order</a>, <a class="el" href="bpm__nr_8h-source.html#l00207">complex_t::re</a>, <a class="el" href="bpm__interface_8h-source.html#l00289">bpmmode::response</a>, <a class="el" href="bpm__wf_8h-source.html#l00191">complexwf_t::wf</a>, and <a class="el" href="bpm__wf_8h-source.html#l00177">doublewf_t::wf</a>.</p>

<p>Referenced by <a class="el" href="generate__bpmsignal_8c-source.html#l00009">generate_bpmsignal()</a>.</p>

</div>
</div><p>
<a class="anchor" name="g48d7fa109bfc01b1c1685b8c4122ccbb"></a><!-- doxytag: member="bpm_simulation.h::get_mode_amplitude" ref="g48d7fa109bfc01b1c1685b8c4122ccbb" args="(bpmconf_t *bpm, bpmmode_t *mode, bunchconf_t *bunch)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">EXTERN <a class="el" href="structcomplex__t.html">complex_t</a> get_mode_amplitude           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structbpmconf.html">bpmconf_t</a> *&nbsp;</td>
          <td class="paramname"> <em>bpm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structbpmmode.html">bpmmode_t</a> *&nbsp;</td>
          <td class="paramname"> <em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structbunchconf.html">bunchconf_t</a> *&nbsp;</td>
          <td class="paramname"> <em>bunch</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Returns the complex amplitude of the mode response. The imaginary part is only used when the incline or tilt signal is calculated which has a 90 deg phase offset. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>bpm</em>&nbsp;</td><td>a pointer to the structure defining the bpm </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>mode</em>&nbsp;</td><td>a pointer to the structure defining a cavity mode </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>bunch</em>&nbsp;</td><td>a pointer to the structure defining the current bunch </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>BPM_SUCCES upon succes, BPM_FAILURE upon failure </dd></dl>

<p>Definition at line <a class="el" href="get__mode__amplitude_8c-source.html#l00009">9</a> of file <a class="el" href="get__mode__amplitude_8c-source.html">get_mode_amplitude.c</a>.</p>

<p>References <a class="el" href="bpm__warning_8c-source.html#l00009">bpm_warning()</a>, <a class="el" href="bpm__interface_8h-source.html#l00273">bunchconf::bpmposition</a>, <a class="el" href="bpm__interface_8h-source.html#l00274">bunchconf::bpmslope</a>, <a class="el" href="bpm__interface_8h-source.html#l00094">bpmconf::cav_length</a>, <a class="el" href="bpm__interface_8h-source.html#l00266">bunchconf::charge</a>, <a class="el" href="bpm__interface_8h-source.html#l00284">bpmmode::frequency</a>, <a class="el" href="bpm__interface_8h-source.html#l00060">horiz</a>, <a class="el" href="bpm__nr_8h-source.html#l00208">complex_t::im</a>, <a class="el" href="bpm__interface_8h-source.html#l00267">bunchconf::length</a>, <a class="el" href="bpm__interface_8h-source.html#l00286">bpmmode::order</a>, <a class="el" href="bpm__interface_8h-source.html#l00287">bpmmode::polarisation</a>, <a class="el" href="bpm__nr_8h-source.html#l00207">complex_t::re</a>, and <a class="el" href="bpm__interface_8h-source.html#l00288">bpmmode::sensitivity</a>.</p>

<p>Referenced by <a class="el" href="add__mode__response_8c-source.html#l00010">add_mode_response()</a>.</p>

</div>
</div><p>
<a class="anchor" name="gefb34ed8710cb83e0ef30ddb6b4c8e33"></a><!-- doxytag: member="bpm_simulation.h::generate_diodesignal" ref="gefb34ed8710cb83e0ef30ddb6b4c8e33" args="(doublewf_t *rf, double sens, filter_t *filt, triggertype_t diode)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">EXTERN <a class="el" href="structdoublewf__t.html">doublewf_t</a>* generate_diodesignal           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdoublewf__t.html">doublewf_t</a> *&nbsp;</td>
          <td class="paramname"> <em>rf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&nbsp;</td>
          <td class="paramname"> <em>sens</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structfilter__t.html">filter_t</a> *&nbsp;</td>
          <td class="paramname"> <em>filt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">triggertype_t&nbsp;</td>
          <td class="paramname"> <em>diode</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Rectifies the rf waveform ( from the reference cavity ) to get a trigger pulse. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>rf</em>&nbsp;</td><td>input waveform </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>sens</em>&nbsp;</td><td>diode sensitivity in mV/uW </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>filt</em>&nbsp;</td><td>pointer to a filter to apply on the signal </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>diode</em>&nbsp;</td><td>type of the diode (pos/neg/bipolar) </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>dc_out</em>&nbsp;</td><td>rectified signal </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>a pointer to the generated rectified waveform </dd></dl>

<p>Definition at line <a class="el" href="generate__diodesignal_8c-source.html#l00011">11</a> of file <a class="el" href="generate__diodesignal_8c-source.html">generate_diodesignal.c</a>.</p>

<p>References <a class="el" href="apply__filter_8c-source.html#l00019">apply_filter()</a>, <a class="el" href="bpm__interface_8h-source.html#l00053">bipolar</a>, <a class="el" href="bpm__error_8c-source.html#l00009">bpm_error()</a>, <a class="el" href="doublewf_8c-source.html#l00008">doublewf()</a>, <a class="el" href="bpm__orbit_8h-source.html#l00050">m33::e</a>, <a class="el" href="bpm__wf_8h-source.html#l00176">doublewf_t::fs</a>, <a class="el" href="bpm__interface_8h-source.html#l00052">negative</a>, <a class="el" href="bpm__wf_8h-source.html#l00175">doublewf_t::ns</a>, <a class="el" href="bpm__interface_8h-source.html#l00051">positive</a>, and <a class="el" href="bpm__wf_8h-source.html#l00177">doublewf_t::wf</a>.</p>

</div>
</div><p>
<a class="anchor" name="gf0f427c71051ef0d09f0760b2e2541bc"></a><!-- doxytag: member="bpm_simulation.h::get_mode_response" ref="gf0f427c71051ef0d09f0760b2e2541bc" args="(bpmmode_t *mode)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">EXTERN int get_mode_response           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structbpmmode.html">bpmmode_t</a> *&nbsp;</td>
          <td class="paramname"> <em>mode</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Calculates the normalized complex mode response, the imaginary part is only used to store incline/tilt signals <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>mode</em>&nbsp;</td><td>structure containing describing the mode and response buffer </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>BPM_SUCCESS upon success or BPM_FAILURE upon failure </dd></dl>

<p>Definition at line <a class="el" href="get__mode__response_8c-source.html#l00011">11</a> of file <a class="el" href="get__mode__response_8c-source.html">get_mode_response.c</a>.</p>

<p>References <a class="el" href="apply__filter_8c-source.html#l00019">apply_filter()</a>, <a class="el" href="bpm__dsp_8h-source.html#l00401">BANDPASS</a>, <a class="el" href="bpm__error_8c-source.html#l00009">bpm_error()</a>, <a class="el" href="complexwf_8c-source.html#l00146">complexwf_reset()</a>, <a class="el" href="complexwf_8c-source.html#l00579">complexwf_setimag()</a>, <a class="el" href="complexwf_8c-source.html#l00557">complexwf_setreal()</a>, <a class="el" href="create__filter_8c-source.html#l00010">create_filter()</a>, <a class="el" href="delete__filter_8c-source.html#l00007">delete_filter()</a>, <a class="el" href="doublewf_8c-source.html#l00008">doublewf()</a>, <a class="el" href="doublewf_8c-source.html#l00202">doublewf_delete()</a>, <a class="el" href="doublewf_8c-source.html#l00532">doublewf_integrate()</a>, <a class="el" href="doublewf_8c-source.html#l00368">doublewf_scale()</a>, <a class="el" href="bpm__interface_8h-source.html#l00284">bpmmode::frequency</a>, <a class="el" href="bpm__wf_8h-source.html#l00190">complexwf_t::fs</a>, <a class="el" href="bpm__wf_8h-source.html#l00189">complexwf_t::ns</a>, <a class="el" href="bpm__interface_8h-source.html#l00286">bpmmode::order</a>, <a class="el" href="bpm__interface_8h-source.html#l00285">bpmmode::Q</a>, <a class="el" href="bpm__dsp_8h-source.html#l00388">RESONATOR</a>, <a class="el" href="bpm__interface_8h-source.html#l00289">bpmmode::response</a>, and <a class="el" href="bpm__wf_8h-source.html#l00177">doublewf_t::wf</a>.</p>

</div>
</div><p>
<a class="anchor" name="g2f6432343a7f528625487b6c00be2298"></a><!-- doxytag: member="bpm_simulation.h::digitise" ref="g2f6432343a7f528625487b6c00be2298" args="(doublewf_t *IF, int nbits, double range_min, double range_max, double clock_jitter, double digi_noise, unsigned int ipmode, intwf_t *wf)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">EXTERN int digitise           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdoublewf__t.html">doublewf_t</a> *&nbsp;</td>
          <td class="paramname"> <em>IF</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>nbits</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&nbsp;</td>
          <td class="paramname"> <em>range_min</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&nbsp;</td>
          <td class="paramname"> <em>range_max</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&nbsp;</td>
          <td class="paramname"> <em>clock_jitter</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&nbsp;</td>
          <td class="paramname"> <em>digi_noise</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&nbsp;</td>
          <td class="paramname"> <em>ipmode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structintwf__t.html">intwf_t</a> *&nbsp;</td>
          <td class="paramname"> <em>wf</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Digitises the waveform using the sampling frequency and the number of samples set in the resulting waveform <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>IF</em>&nbsp;</td><td>input waveform to digitse </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>nbits</em>&nbsp;</td><td>bit resolution of the ADC </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>range_min</em>&nbsp;</td><td>the minimum voltage and </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>range_max</em>&nbsp;</td><td>the maximum voltage the ADC can process </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>clock_jitter</em>&nbsp;</td><td>ADC clock jitter </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>digi_noise</em>&nbsp;</td><td>rms digitiser noise in ADC channels </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>ipmode</em>&nbsp;</td><td>interpolation mode for <a class="el" href="group__wave.html#gc0d42d516eec4e92f7d3cfdea49eccd4">doublewf_getvalue()</a> </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>wf</em>&nbsp;</td><td>sampled waveform </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>BPM_SUCCESS upon success, BPM_FAILURE upon failure </dd></dl>

<p>Definition at line <a class="el" href="digitise_8c-source.html#l00011">11</a> of file <a class="el" href="digitise_8c-source.html">digitise.c</a>.</p>

<p>References <a class="el" href="bpm__error_8c-source.html#l00009">bpm_error()</a>, <a class="el" href="doublewf_8c-source.html#l00575">doublewf_getvalue()</a>, <a class="el" href="bpm__wf_8h-source.html#l00176">doublewf_t::fs</a>, <a class="el" href="bpm__wf_8h-source.html#l00183">intwf_t::fs</a>, <a class="el" href="intwf_8c-source.html#l00423">intwf_add_ampnoise()</a>, <a class="el" href="nr__rangauss_8c-source.html#l00019">nr_rangauss()</a>, <a class="el" href="bpm__wf_8h-source.html#l00175">doublewf_t::ns</a>, <a class="el" href="bpm__wf_8h-source.html#l00182">intwf_t::ns</a>, and <a class="el" href="bpm__wf_8h-source.html#l00184">intwf_t::wf</a>.</p>

</div>
</div><p>
<hr><h2>Variable Documentation</h2>
<a class="anchor" name="gab98b463116d15c85586716a295bd4e5"></a><!-- doxytag: member="bpm_simulation.h::ambient_temp" ref="gab98b463116d15c85586716a295bd4e5" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">EXTERN double <a class="el" href="group__sim.html#gab98b463116d15c85586716a295bd4e5">ambient_temp</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Ambient temperature in K 
<p>Definition at line <a class="el" href="bpm__simulation_8h-source.html#l00067">67</a> of file <a class="el" href="bpm__simulation_8h-source.html">bpm_simulation.h</a>.</p>

<p>Referenced by <a class="el" href="set__temp_8c-source.html#l00017">set_temp()</a>.</p>

</div>
</div><p>
<a class="anchor" name="g0974a019ef95024af711df3d31deb629"></a><!-- doxytag: member="bpm_simulation.h::system_time" ref="g0974a019ef95024af711df3d31deb629" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">EXTERN double <a class="el" href="group__sim.html#g0974a019ef95024af711df3d31deb629">system_time</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Current system time in s 
<p>Definition at line <a class="el" href="bpm__simulation_8h-source.html#l00077">77</a> of file <a class="el" href="bpm__simulation_8h-source.html">bpm_simulation.h</a>.</p>

<p>Referenced by <a class="el" href="set__time_8c-source.html#l00017">set_time()</a>.</p>

</div>
</div><p>
</div>
<hr size="1"><address style="text-align: right;"><small>Generated on Wed Jun 25 17:32:49 2008 for libbpm by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.6 </small></address>
</body>
</html>
